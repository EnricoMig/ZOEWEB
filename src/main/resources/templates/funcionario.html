<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clínica Zoe - Medicina Ocupacional</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
    <link rel="stylesheet" th:href="@{/css/table.css}">
    <link rel="stylesheet" th:href="@{/css/gerencia.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-... (hash omitido para brevidade) ..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <!-- HEADER COM LOGO E NAVEGAÇÃO -->
    <header class="header">
        <div class="container header-content">
            <div class="logo">
                <!-- Substitua o src pela imagem real ou use /static/logo.png -->
                <img th:src="@{/images/logo-zoe.png}" alt="Logo Clínica Zoe">
                <div class="logo-text">
                    <h1>Grupo Zoe</h1>
                    <p>Medicina Ocupacional</p>
                </div>
            </div>

            <nav class="navbar">
                <a th:href="@{/funcionario}">DASHBOARD</a>
            </nav>
        </div>
    </header>

    <main class="gerente-layout">
        <!-- Sidebar lateral -->
        <aside class="sidebar">
            <h2>Administração</h2>
            <nav class="sidebar-nav">
                <a th:href="@{/admin/funcionario}" class="active">Funcionario</a>
                <a th:href="@{/admin/campanha}">Campanha</a>
                <a th:href="@{/admin/medico}">Medico</a>
                <a href="#">Configurações</a>
            </nav>
        </aside>

        <!-- Conteúdo principal da dashboard -->
        <section class="dashboard">
            <div class="dashboard-header">
                <h2>Dashboard de Funcionários</h2>
                <a th:href="@{/admin/cadastro}" class="btn-cadastrar">Cadastrar Funcionário</a>

            </div>

            <!-- Aqui será exibido o conteúdo real futuramente (tabela, cards, etc.) -->
            <div class="dashboard-content">
                <p>Nenhum funcionário listado.</p>
            </div>
        </section>
    </main>

    <!-- RODAPÉ -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2025 Clínica Zoe - Todos os direitos reservados</p>
            </div>
        </div>
    </footer>

    <script>
async function carregarFuncionarios() {
  try {
    const response = await fetch('/api/funcionario');
    if (!response.ok) throw new Error('Erro ao buscar funcionários');

    const funcionarios = await response.json();
    const container = document.querySelector('.dashboard-content');

    if (funcionarios.length === 0) {
      container.innerHTML = `<p>Nenhum funcionário listado.</p>`;
      return;
    }

    // Exibe como tabela
  let tabela = `
    <table class="tabela-funcionarios">
        <thead>
        <tr>
            <th>Nome</th>
            <th>Cargo</th>
            <th>Setor</th>
            <th>Ações</th>
        </tr>
        </thead>
        <tbody>
    `;

funcionarios.forEach(f => {
  tabela += `
    <tr>
      <td data-label="Nome">${f.nome}</td>
      <td data-label="Cargo">${f.cargo}</td>
      <td data-label="Setor">${f.setor}</td>
      <td data-label="Ações" class="acoes">
        <i class="fa-solid fa-eye" title="Visualizar"></i>
        <i class="fa-solid fa-pen-to-square" title="Editar"></i>
        <i class="fa-solid fa-trash" title="Excluir"></i>
      </td>
    </tr>
  `;
});

tabela += `</tbody></table>`;
container.innerHTML = tabela;


  } catch (error) {
    console.error(error);
    document.querySelector('.dashboard-content').innerHTML =
      `<p>Erro ao carregar funcionários.</p>`;
  }
}

document.addEventListener('DOMContentLoaded', carregarFuncionarios);
</script>


</body>
</html>
